@import "tailwindcss";
@config "../tailwind.config.ts";

/*
	Main Application CSS
	--------------------
	- Imports Tailwind and config
	- Defines custom component classes using @apply for maintainability
	- All screen styles (including dark mode) are here; print styles are in styles/calendarPrint.css
*/

/* Calendar semantic modifiers (used by CalendarMonth.svelte)
   Defined in utilities layer so they override per-element utility classes like bg-white. */
@layer utilities {
    /* ...existing code... */

    .calendar-day.payment {
        @apply bg-emerald-500 font-bold text-white dark:bg-emerald-600 dark:text-gray-50;
    }

    .legend-item.payment {
        @apply bg-emerald-500 font-bold text-white dark:bg-emerald-600 dark:text-gray-50;
    }

    .calendar-day.early-payment {
        @apply bg-amber-500 font-bold text-white dark:bg-amber-600 dark:text-gray-50;
    }

    .legend-item.early-payment {
        @apply bg-amber-500 font-bold text-white dark:bg-amber-600 dark:text-gray-50;
    }

    .calendar-day.holiday {
        @apply bg-blue-500 text-white dark:bg-blue-700 dark:text-white;
    }

    .legend-item.holiday {
        @apply bg-blue-500 text-white dark:bg-blue-700 dark:text-white;
    }

    .calendar-day.additional-holiday {
    }

    .calendar-day.today {
        @apply outline outline-2 outline-sky-500 dark:outline-sky-300 outline-offset-[-2px];
    }

    .calendar-day .today-number {
        @apply inline-flex items-center justify-center rounded-full border border-current px-1 leading-tight;
    }

    /* Subtle shading for non-working weekend days (screen only) */
    .calendar-day.weekend {
        @apply bg-gray-50 dark:bg-gray-700;
    }

    .legend-item.weekend {
        @apply border border-gray-300 dark:border-gray-600;
    }
}

/* Help markdown heading size overrides */
.help-markdown h2 {
    font-size: 1.25rem;
    /* Tailwind text-xl */
    font-weight: 700;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
}

/* Shared details/summary styles for custom summary panels used across the app
   Applies to .custom-details/.custom-summary pattern used in Help and SummaryCardContent
*/
summary::-webkit-details-marker { display: none; }
summary::marker { display: none; }

.custom-summary {
    cursor: pointer;
    transition: background-color 160ms ease, border-radius 160ms ease;
    border-radius: 0.5rem;
}
.custom-summary:hover { background-color: rgba(0,0,0,0.03); }
:global(.dark) .custom-summary:hover { background-color: rgba(255,255,255,0.03); }

/* Slightly smaller radius for nested subsections */
.custom-details .custom-summary { gap: 0.5rem; border-radius: 0.375rem; }

/* Keep open summaries visually consistent with hover state */
details[open] > .custom-summary { background-color: rgba(0,0,0,0.03); border-radius: 0.5rem; }
:global(.dark) details[open] > .custom-summary { background-color: rgba(255,255,255,0.03); border-radius: 0.5rem; }

.custom-summary .chev { transition: transform 160ms ease; }
details[open] > .custom-summary .chev { transform: rotate(180deg); }

/* Shared details content rule (keeps native behaviour) */
.details-content {
    display: block;
    max-height: none;
    opacity: 1;
    transform: none;
    overflow: visible;
    transition: none;
}

.help-markdown h3 {
    font-size: 0.9rem;
    font-weight: 600;
    margin-top: 1.25rem;
    margin-bottom: 0.5rem;
}

/* Help markdown image styling */
.help-markdown img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 0.75rem 0;
    border: 1px solid rgb(229 231 235);
    /* gray-200 */
    border-radius: 0.5rem;
    box-shadow: 0 6px 16px -6px rgb(0 0 0 / 0.22);
}

.dark .help-markdown img {
    border-color: rgb(55 65 81);
    /* gray-700 */
}

/* Date input calendar icon in dark mode */
.dark input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1) brightness(1.2);
    opacity: 0.9;
}

/* Tighter app details table spacing */
.help-markdown dl,
.help-markdown dt,
.help-markdown dd {
    margin: 0;
    padding: 0;
}
